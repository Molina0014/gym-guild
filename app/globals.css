@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== CSS Variables ===== */
:root {
    --background: #1a1a2e;
    --foreground: #eaeaea;
    --font-pixel: "Press Start 2P", monospace;
    --font-medieval: Georgia, serif;
}

/* ===== Base Styles ===== */
body {
    color: var(--foreground);
    background: var(--background);
    font-family: var(--font-pixel), monospace;
    image-rendering: pixelated;
    -webkit-font-smoothing: none;
    -moz-osx-font-smoothing: unset;
}

/* ===== Pixel Art Rendering ===== */
.pixel-art {
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    -ms-interpolation-mode: nearest-neighbor;
}

/* ===== Scrollbar Styling ===== */
::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

::-webkit-scrollbar-track {
    background: #2a2a4a;
    border: 2px solid #1a1a2e;
}

::-webkit-scrollbar-thumb {
    background: #4a4a6a;
    border: 2px solid #3a3a5a;
}

::-webkit-scrollbar-thumb:hover {
    background: #5a5a7a;
}

/* ===== Utility Classes ===== */
@layer utilities {
    .text-balance {
        text-wrap: balance;
    }
}

/* ===== Component Styles ===== */
@layer components {
    /* Pixel Border Box */
    .pixel-box {
        @apply border-pixel border-black bg-parchment text-gray-900 shadow-pixel;
        position: relative;
    }

    .pixel-box::before {
        content: "";
        position: absolute;
        top: -4px;
        left: -4px;
        right: -4px;
        bottom: -4px;
        border: 4px solid transparent;
        border-image: linear-gradient(45deg, #8b5a2b, #d4940c, #8b5a2b) 1;
        pointer-events: none;
    }

    /* Pixel Button */
    .pixel-btn {
        @apply px-4 py-2 font-pixel text-xs uppercase tracking-wider;
        @apply border-pixel border-black shadow-pixel;
        @apply transition-all duration-100;
        @apply hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-pixel-sm;
        @apply active:translate-x-[4px] active:translate-y-[4px] active:shadow-none;
    }

    .pixel-btn-primary {
        @apply pixel-btn bg-primary-500 text-white;
        @apply hover:bg-primary-600;
    }

    .pixel-btn-secondary {
        @apply pixel-btn bg-secondary-600 text-white;
        @apply hover:bg-secondary-700;
    }

    .pixel-btn-accent {
        @apply pixel-btn bg-accent-600 text-white;
        @apply hover:bg-accent-700;
    }

    .pixel-btn-danger {
        @apply pixel-btn bg-health text-white;
        @apply hover:bg-red-700;
    }

    /* Pixel Input */
    .pixel-input {
        @apply w-full px-3 py-2 font-pixel text-xs;
        @apply border-pixel border-black bg-white text-gray-900;
        @apply shadow-pixel-inset;
        @apply focus:outline-none focus:ring-2 focus:ring-primary-500;
    }

    /* Pixel Card */
    .pixel-card {
        @apply p-4 border-pixel border-black bg-parchment text-gray-900 shadow-pixel;
    }

    /* HP/XP/Mana Bars */
    .stat-bar {
        @apply h-4 border-2 border-black bg-gray-800 overflow-hidden;
    }

    .stat-bar-fill {
        @apply h-full transition-all duration-300;
    }

    .hp-bar .stat-bar-fill {
        @apply bg-health;
    }

    .mana-bar .stat-bar-fill {
        @apply bg-mana;
    }

    .xp-bar .stat-bar-fill {
        @apply bg-xp;
    }

    .stamina-bar .stat-bar-fill {
        @apply bg-stamina;
    }

    /* Level Badge */
    .level-badge {
        @apply inline-flex items-center justify-center;
        @apply w-8 h-8 rounded-full;
        @apply border-2 border-primary-700 bg-primary-500;
        @apply font-pixel text-xs text-white;
        @apply shadow-pixel-sm;
    }

    /* Quest Card */
    .quest-card {
        @apply pixel-card relative overflow-hidden;
    }

    .quest-card::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #d4940c, #f5cc47, #d4940c);
    }

    /* Navigation Tab */
    .nav-tab {
        @apply flex flex-col items-center justify-center p-2;
        @apply font-pixel text-[8px] uppercase;
        @apply text-gray-400 transition-colors;
    }

    .nav-tab.active {
        @apply text-primary-400;
    }

    .nav-tab:hover {
        @apply text-primary-300;
    }

    /* Tooltip */
    .pixel-tooltip {
        @apply absolute z-50 px-2 py-1;
        @apply font-pixel text-[10px] text-white;
        @apply bg-gray-900 border-2 border-black;
        @apply shadow-pixel-sm;
    }
}

/* ===== Animation Helpers ===== */
@layer utilities {
    .animate-damage {
        animation: shake 0.3s ease-in-out;
    }

    .animate-heal {
        animation: pulse-glow 0.5s ease-out;
    }
}

/* ===== Dark Parchment Background Pattern ===== */
.bg-parchment-dark {
    background-color: #2a2a4a;
    background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%233a3a5a' fill-opacity='0.3'%3E%3Cpath d='M0 0h20v20H0z'/%3E%3C/g%3E%3C/svg%3E");
}

/* ===== Selection Color ===== */
::selection {
    background-color: rgba(212, 148, 12, 0.4);
    color: white;
}
